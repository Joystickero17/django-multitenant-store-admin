(function(){"use strict";var t={860:function(t,e,s){var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row flex-nowrap"},[e("div",{staticClass:"col-2 bg-dark navigation__menu p-0 mr-4"},[e("div",{staticClass:"store-logo"},[e("img",{staticClass:"h-75",attrs:{src:this.storeLogo,alt:""}}),e("h5",{staticClass:"text-center"},[e("a",{staticClass:"text-decoration-none text-white",attrs:{href:t.storeUrl}},[t._v("Tienda 1")])])]),e("router-link",{attrs:{activeClass:"active",to:"/",exact:""}},[t._v("Dashboard")]),e("router-link",{attrs:{activeClass:"active",to:"/contacts"}},[t._v("Contactos")]),e("router-link",{attrs:{activeClass:"active",to:"/freelancers"}},[t._v("Freelancers")]),e("router-link",{attrs:{activeClass:"active",to:"/ventas"}},[t._v("Ordenes")]),e("router-link",{attrs:{activeClass:"active",to:"/products"}},[t._v("Productos")]),e("router-link",{attrs:{activeClass:"active",to:"/settings"}},[t._v("Configuración")])],1),e("div",{staticClass:"p-0 w-100"},[e("HeaderComponent",{attrs:{username:t.username}}),e("router-view",{staticClass:"mt-5"}),e("vue-progress-bar")],1)])]),e("nav")])},i=[],r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row m-0 p-3",staticStyle:{height:"80px"}},[e("div",{staticClass:"col-md-8 d-flex align-items-center"},[e("h5",[t._v(t._s(this.$route.meta.verbose_name))])]),e("div",{staticClass:"col-md-4 d-flex justify-content-center align-items-center",staticStyle:{height:"40px"}},[e("div",{staticClass:"notifications p-4"},[e("BIconBellFill",{attrs:{variant:"secondary"}})],1),e("div",{staticClass:"user-area pl-4 d-flex flex-nowrap align-items-center"},[e("span",{staticClass:"m-0 h-50",staticStyle:{"font-size":"0.8vw"}},[t._v(t._s(t.username))]),e("img",{staticClass:"profile-pic rounded-circle mx-3",attrs:{src:"https://randomuser.me/api/portraits/men/76.jpg",alt:""}})]),e("div",{staticClass:"credits"},[t._v(" $0.00 ")])])])},o=[],n=s(8752),c={props:["username"],data(){return{}},components:{BIconBellFill:n.whn}},l=c,d=s(1001),u=(0,d.Z)(l,r,o,!1,null,null,null),h=u.exports,p={components:{HeaderComponent:h},data(){return{storeUrl:"",storeLogo:"/static/img/no-photo.png",username:""}},mounted(){this.$setupAxios(),this.$axios.get("/api/same_user/",{withCredentials:!0}).then((t=>t.data)).then((t=>{let e=t.results[0];e.store_details||(window.location.href="/store/?user_has_no_store=true"),this.username=e.email,e.name&&e.last_name&&(this.username=`${e.name} ${e.last_name}`),this.storeUrl=`/store/${e.store_details?.slug}`;let s=new WebSocket(`${{NODE_ENV:"production",BASE_URL:"/"}.WEBSOCKET_URL}/ws/notifications/${e.store_details.slug}/`),a=this;s.onmessage=t=>{let e=JSON.parse(t.data);a.$bvToast.toast(`${e.message}`,{title:"Notificacion",autoHideDelay:5e3,appendToast:!0}),console.log(t.data)},this.storeLogo=e.store_details?.logo||"/static/img/no-photo.png"}))}},m=p,g=(0,d.Z)(m,a,i,!1,null,null,null),f=g.exports,v=s(6369),_=s(2631),b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard"},[e("div",{staticClass:"row justify-content-between mx-5 mb-4"},[e("div",{staticClass:"col-md-3"},[e("b-card",[e("b-card-text",[e("h6",{staticClass:"text-center"},[t._v("Ventas")]),e("h1",{staticClass:"text-center"},[e("number",{ref:"number1",attrs:{from:0,to:t.totalVentas,duration:3,easing:"Power1.easeOut"}})],1)])],1)],1),e("div",{staticClass:"col-md-3"},[e("b-card",[e("b-card-text",[e("h6",{staticClass:"text-center"},[t._v("Productos")]),e("h1",{staticClass:"text-center"},[e("number",{ref:"number1",attrs:{from:0,to:t.totalProductos,duration:3,easing:"Power1.easeOut"}})],1)])],1)],1),e("div",{staticClass:"col-md-3"},[e("b-card",[e("b-card-text",[e("h6",{staticClass:"text-center"},[t._v("Devoluciones")]),e("h1",{staticClass:"text-center"},[e("number",{ref:"number1",attrs:{from:0,to:t.totalDevoluciones,duration:3,easing:"Power1.easeOut"}})],1)])],1)],1),e("div",{staticClass:"col-md-3"},[e("b-card",[e("b-card-text",[e("h6",{staticClass:"text-center"},[t._v("Usuarios")]),e("h1",{staticClass:"text-center"},[e("number",{ref:"number1",attrs:{from:0,to:t.totalUsuarios,duration:3,easing:"Power1.easeOut"}})],1)])],1)],1)]),e("div",{staticClass:"row justify-content-between mx-5"},[e("div",{staticClass:"col-12 border rounded mx-2 p-0 d-flex"},[e("div",{staticClass:"col-md-9 p-4"},[e("div",{staticClass:"chart-settings d-flex justify-content-between"},[e("div",{staticClass:"chart_title"},[e("h3",{staticClass:"h4"},[t._v("Ventas (USD)")]),e("span",{staticClass:"text-secondary"},[t._v(t._s(t.chartDate))])]),e("div",{staticClass:"chart_date_select"},[e("b-button",{attrs:{pill:"",pressed:"year"==t.chartType,variant:"outline-secondary"},on:{click:function(e){return t.setYearStats()}}},[t._v("Anual")]),e("b-button",{staticClass:"ml-2",attrs:{pill:"",pressed:"month"==t.chartType,variant:"outline-secondary"},on:{click:function(e){return t.setMonthStats()}}},[t._v("Mensual")])],1)]),e("LineChart",{ref:"myChart",attrs:{labels:t.labels,data_list:t.chart_data}})],1),e("div",{staticClass:"col-md-3 p-0 m-0 overflow-hidden"},[e("div",{staticClass:"border w-100"},[e("p",{staticClass:"text-center text-secondary"},[t._v("Visitas")]),e("h1",{staticClass:"text-center"},[e("number",{ref:"number1",attrs:{from:0,to:t.totalVentas,duration:1,easing:"Power1.easeOut"}})],1)]),e("div",{staticClass:"border w-100"},[e("p",{staticClass:"text-center text-secondary"},[t._v("Reseñas")]),e("h1",{staticClass:"text-center"},[e("number",{ref:"number1",attrs:{from:0,to:t.totalReviews,duration:1,easing:"Power1.easeOut"}})],1)]),e("div",{staticClass:"border w-100"},[e("p",{staticClass:"text-center text-secondary"},[t._v("Cantidad de Ventas")]),e("h1",{staticClass:"text-center"},[t._v(t._s(t.totalVentas))])]),e("div",{staticClass:"border w-100",staticStyle:{height:"80px"}}),e("div",{staticClass:"border w-100",staticStyle:{height:"80px"}})])])])])},C=[],y=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"max-width":"55vw"}},[e("apexChart",{ref:"lineChart",attrs:{height:"300",type:"line",options:t.chartOptions,series:t.series}})],1)},x=[],w={components:{},props:["labels","data_list"],computed:{chartData(){return this.initial_data}},methods:{updateChart(t,e){console.log("XD"),this.chartOptions={...this.chartOptions,xaxis:{categories:t}},this.series=[{name:"ventas_mes",data:e}]},refreshChart(){console.log("XD"),this.chartOptions={...this.chartOptions,xaxis:{categories:this.labels}},this.series=[{name:"ventas_mes",data:this.data_list}]}},data(){return{chartOptions:{chart:{id:"vuechart-example"},xaxis:{categories:[1991,1992,1993,1994,1995,1996,1997,1998]},stroke:{curve:"smooth"}},series:[{name:"series-1",data:[0,0,0,0,0,0,0,0]}]}},mounted(){this.refreshChart()}},S=w,k=(0,d.Z)(S,y,x,!1,null,null,null),I=k.exports,P=s(6943);P.Z.defaults.xsrfHeaderName="X-CSRFTOKEN",P.Z.defaults.xsrfCookieName="csrftoken";var $={name:"HomeView",components:{LineChart:I},data(){return{totalVentas:0,cantidadVentas:0,chart_data_loaded:!1,labels:[],chart_data:[],totalProductos:0,totalDevoluciones:0,totalUsuarios:0,totalReviews:0,chartDate:"Enero del 2023",chartDateYear:"",chartDateMonth:"",chartType:"year"}},methods:{setYearStats(){this.chartType="year",this.$axios.post("/api/chart/",{year:2023,chart_type:this.chartType},{withCredentials:!0}).then((t=>t)).catch((t=>{console.log(t.response)})).then((t=>{let e=t.data;this.labels=Object.keys(e.chart),this.totalVentas=e.total_sales_count,this.totalProductos=e.products,this.totalUsuarios=e.users,this.totalReviews=e.reviews,this.chart_data=Object.values(e.chart),this.$refs.myChart.updateChart(this.labels,this.chart_data)}))},setMonthStats(){this.chartType="month",this.$axios.post("/api/chart/",{year:2023,month:1,chart_type:this.chartType},{withCredentials:!0}).then((t=>t)).catch((t=>{console.log(t.response)})).then((t=>{let e=t.data;this.labels=Object.keys(e.chart),this.totalVentas=e.total_sales_count,this.totalProductos=e.products,this.totalUsuarios=e.users,this.totalReviews=e.reviews,this.chart_data=Object.values(e.chart),this.$refs.myChart.updateChart(this.labels,this.chart_data)}))}},mounted(){this.$axios.post("/api/chart/",{year:2023,chart_type:this.chartType},{withCredentials:!0}).then((t=>t)).catch((t=>{console.log(t.response)})).then((t=>{let e=t.data;this.labels=Object.keys(e.chart),this.totalVentas=e.total_sales_count,this.totalProductos=e.products,this.totalUsuarios=e.users,this.totalReviews=e.reviews,this.chart_data=Object.values(e.chart),this.$refs.myChart.updateChart(this.labels,this.chart_data)}))}},B=$,O=(0,d.Z)(B,b,C,!1,null,null,null),N=O.exports,R=function(){var t=this;t._self._c;return t._m(0)},D=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"a"},[e("h4",[t._v("Vista de contactos")])])}],F={name:"ContactosView"},T=F,E=(0,d.Z)(T,R,D,!1,null,null,null),U=E.exports,A=(s(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-3"},[e("div",{staticClass:"add__btn bg-success",on:{click:function(e){return t.$router.push({name:"product.new"})}}},[e("BIconPlus",{attrs:{"font-scale":"3"}})],1),e("b-modal",{ref:"delete-modal",attrs:{"hide-footer":"",title:"Seleccione el Campo a Filtrar"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"text-center modal-text"},[t._v("Esta seguro que desea borrar el producto con ID "+t._s(t.selectedProductDelete))]),e("b-button",{staticClass:"my-2",attrs:{variant:"outline-danger",outline:""}},[t._v("Si")]),e("b-button",{attrs:{variant:"outline-dark",outline:""}},[t._v("No")])],1)]),e("b-modal",{ref:"filter-modal",attrs:{"hide-footer":"",title:"Seleccione el Campo a Filtrar"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"text-center"},[t._v("Filtros")]),e("b-form-group",{staticClass:"mx-5",attrs:{label:"Campos de Producto"}},[e("b-form-radio",{attrs:{name:"some-radios",value:null},model:{value:t.selectedFilter,callback:function(e){t.selectedFilter=e},expression:"selectedFilter"}},[t._v("Todos los campos")]),e("b-form-radio",{attrs:{name:"some-radios",value:"name"},model:{value:t.selectedFilter,callback:function(e){t.selectedFilter=e},expression:"selectedFilter"}},[t._v("Nombre del Producto")])],1)],1)]),e("div",{staticClass:"row border justify-content-between align-items-center rounded mx-2 px-2 py-3"},[e("div",{staticClass:"col-9 d-flex"},[e("div",{staticClass:"col-6"},[e("h5",[t._v(" Todos los productos ")]),e("small",[t._v("total: "+t._s(t.totalRows))])]),e("div",{staticClass:"col-6 d-flex align-items-center"},[e("b-form-input",{attrs:{id:"input-default",placeholder:"Buscar"},on:{input:function(e){return t.searchProducts()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"filter d-flex"},[e("div",{staticClass:"order-filter d-flex align-items-center pointer"},[e("BIconFilter",{attrs:{variant:"secondary"}}),e("span",{staticClass:"mx-1 p-0"},[t._v("Orden")])],1),e("div",{staticClass:"order-filter mx-3 d-flex align-items-center pointer",on:{click:function(e){return t.showFilterModal()}}},[e("BIconFunnelFill",{attrs:{variant:"secondary"}}),e("span",{staticClass:"mx-1 p-0"},[t._v("Filtros")])],1)])])]),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"mt-3"},[e("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":30},on:{input:function(e){return t.searchProducts(e)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),e("div",{staticClass:"row overflow-scrollx m-2 products_table p-1"},[t.noResults?e("div",{staticClass:"col-12 d-flex justify-content-center"},[e("img",{staticClass:"w-25",attrs:{src:t.noResultsImg,alt:""}})]):t._e(),e("SkeletonBootstrapLoader",{attrs:{loading:t.loading,quantity:7}}),t._l(t.items,(function(s){return e("div",{key:s.id,staticClass:"col-12 border rounded my-2 px-2 py-3 d-flex"},[e("div",{staticClass:"col-2 pointer",on:{click:function(e){return t.showProductDetail(s.id)}}},[e("img",{staticClass:"products_table__img rounded",attrs:{src:s?.thumbnail?.file||t.storeLogo,alt:""}})]),e("div",{staticClass:"col-9 pointer",on:{click:function(e){return t.showProductDetail(s.id)}}},[e("h5",[t._v(t._s(s.name))]),e("span",{staticClass:"secondary"},t._l(s?.category?.full_path,(function(s,a){return e("b-badge",{key:a,staticClass:"mx-1"},[t._v(" "+t._s(s)+" ")])})),1),e("p",{staticClass:"products_table__description text-justify mt-2 product__price"},[t._v(" "+t._s(s.price?"$"+s.price:"Gratuito")+" ")])]),e("div",{staticClass:"col-1 d-flex"},[e("div",{staticClass:"px-2 pointer",on:{click:function(e){return t.editProductDetail(s.id)}}},[e("BIconPencilSquare")],1),e("div",{staticClass:"px-2 pointer",on:{click:function(e){return t.showDeleteProduct(s.id)}}},[e("BIconTrashFill")],1)])])}))],2),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"mt-3"},[e("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":30},on:{input:function(e){return t.searchProducts(e)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])],1)}),j=[],M=function(){var t=this,e=t._self._c;return t.loading?e("div",{staticClass:"w-100"},t._l(t.quantity,(function(t){return e("div",{key:"skeleton"+t,staticClass:"col-12 d-flex border rounded mx-0 my-2 p-3",staticStyle:{overflow:"hidden",height:"150px"}},[e("div",{staticClass:"col-2"},[e("b-skeleton-img")],1),e("div",{staticClass:"col-9"},[e("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"70%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"70%"}})],1)])})),0):t._e()},L=[],J={props:["loading","quantity"]},V=J,Z=(0,d.Z)(V,M,L,!1,null,null,null),q=Z.exports,z={components:{BIconFilter:n.jL1,SkeletonBootstrapLoader:q,BIconFunnelFill:n.mAP,BIconPencilSquare:n.Sle,BIconTrashFill:n.jsZ,BIconPlus:n.s3j},data(){return{loading:!0,storeLogo:"/static/img/no-photo.png",noResultsImg:"/static/img/no_results.svg",isBusy:!1,selectedProductDelete:null,currentPage:1,totalRows:0,selectedFilter:"",search:"",items:[]}},computed:{noResults(){return!this.items.length&&!!this.search&&!this.loading}},methods:{showDeleteProduct(t){this.$refs["delete-modal"].show(),this.selectedProductDelete=t},editProductDetail(t){this.$router.push({name:"product.edit",params:{id:t}})},showProductDetail(t){this.$router.push({name:"product.detail",params:{id:t}})},showFilterModal(){this.$refs["filter-modal"].show()},searchProducts(t=1){this.items=[],this.loading=!0,this.$axios.get("/api/product/",{params:{search:this.search,page:t},withCredentials:!0}).then((t=>t)).then((t=>{let e=t.data;this.items=e.results,this.totalRows=e.count,this.loading=!1})).catch((t=>{console.log(t)}))}},mounted(){this.loading=!0,this.$axios.get("/api/product/").then((t=>t)).then((t=>{let e=t.data;this.items=e.results,this.totalRows=e.count,this.loading=!1})).catch((t=>{console.log(t)}))}},Y=z,H=(0,d.Z)(Y,A,j,!1,null,null,null),W=H.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-5 mb-3"},[e("b-button",{staticClass:"my-1",attrs:{squared:"",variant:"outline-danger"},on:{click:function(e){return t.$router.push({name:"productos-list"})}}},[e("BIconArrowBarLeft"),t._v(" Regresar al listado")],1),e("div",{staticClass:"row border rounded p-3"},[e("div",{staticClass:"col-lg-6"},[e("h5",{attrs:{for:""}},[t._v("N° de Producto")]),e("p",[t._v("N° "+t._s(t.newproduct.id))]),e("h5",{attrs:{for:""}},[t._v("Nombre del Producto")]),e("p",[t._v(t._s(t.newproduct.name))]),e("div",{staticClass:"d-flex align-items-center mt-4"},[e("div",{staticClass:"col-6"},[t._m(0),e("div",{staticClass:"d-flex"},[t.categoryRoute.length?e("div",t._l(t.categoryRoute,(function(s,a){return e("b-badge",{key:a,staticClass:"mx-1"},[t._v(" "+t._s(s))])})),1):t._e()])]),e("div",{staticClass:"col-6"},[t._m(1),e("b-badge",[t._v(t._s(t.newproduct.brand?.name))])],1)]),e("div",{staticClass:"d-flex align-items-center mt-4"},[e("div",{staticClass:"col-12"},[e("h6",[t._v("Precio (USD)")]),e("p",[t._v(t._s(t.product.price))])])]),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"col-6"},[e("div",[e("h6",[t._v("Condición")]),e("p",[t._v(t._s(t.product.verbose_condition))])])]),e("div",{staticClass:"col-6"},[e("h6",[t._v("N° de Unidades")]),e("p",[t._v(t._s(t.product.quantity))])])])]),e("br"),e("div",{staticClass:"col-lg-5"},[e("h6",[t._v("Fotos")]),t.selectedImageSrc?t._e():e("div",{staticClass:"current-image d-flex justify-content-center align-items-center"},[e("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Large Spinner",type:"grow"}})],1),t.selectedImageSrc?e("img",{staticClass:"current-image rounded border",attrs:{src:t.selectedImageSrc,alt:""}}):t._e(),e("div",{staticClass:"col-12 d-flex"},t._l(t.images,(function(s){return e("div",{key:"photo-"+s.id,staticClass:"tiny-image ml-2 my-2",class:{"border border-danger":t.selectedImage=="photo-"+s.id},on:{click:function(e){return t.selectPhoto("photo-"+s.id)}}},[e("img",{ref:"photo-"+s.id,refInFor:!0,staticClass:"w-100",attrs:{src:s.file||"/static/img/no-photo.png",alt:""}})])})),0)]),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"col-12"},[e("h5",[t._v("Descripción")]),e("p",[t._v(t._s(t.product.description))])])])])],1)},G=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex"},[e("h5",{attrs:{for:""}},[t._v("Categorías ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex"},[e("h5",{attrs:{for:""}},[t._v("Marca ")])])}],K={components:{BIconXLg:n.hOD,BIconArrowBarLeft:n.Rep},data(){return{brands:[],selectedBrand:null,brandSearch:"",categorySearch:"",categoryRoute:[],selectedCategory:null,categories:[],response_message:"",product:{},newproduct:{},initial_images_len:0,initial_images:[],images:[],selectedImage:"",selectedImageSrc:"",loadingImage:!1,conditionOptions:[{value:"NEW",text:"Nuevo"},{value:"USED",text:"Usado"},{value:"REFURBISHED",text:"Remanufacturado"}]}},methods:{populateData(t){this.images=[],this.product=t,this.images.push(...t.photos),this.initial_images_len=this.images.length,this.initial_images=[...this.images],this.newproduct=JSON.parse(JSON.stringify(t)),this.categoryRoute=this.newproduct.category?.full_path,this.product.category_id=this.product.category?.id,this.newproduct.category_id=this.product.category?.id,this.product.brand_id=this.product.brand?.id,this.newproduct.brand_id=this.product.brand?.id,this.selectedImageSrc=this.product?.thumbnail?.file||this.images[0]?.file||s(1663)},setAndSearchBrand(t){this.selectedBrand=t,this.newproduct.brand_id=t.id,this.browseBrand()},resetBrand(){},browseBrand(){let t={search:this.brandSearch};this.$axios.get("/api/brand/",{params:t}).then((t=>{this.brands=t.data.results})).catch((t=>{console.log(t.response.data)}))},resetCategoryRoute(){this.categoryRoute=this.product.category?.full_path,this.selectedCategory=this.product.category?.id,this.newproduct.category_id=this.product.category?.id,this.selectedCategory=null,this.browseCategory()},setAndSearchCategory(t){this.selectedCategory=t.id,this.newproduct.category_id=t.id,this.categoryRoute=t.full_path,this.browseCategory()},browseCategory(){let t=this.selectedCategory?{search:this.categorySearch,parent:this.selectedCategory}:{search:this.categorySearch,parents_only:!0};this.$axios.get("/api/category/",{params:t}).then((t=>{this.categories=t.data.results})).catch((t=>{console.log(t.response.data)}))},setImage(t){this.loadingImage=!0,this.$axios.post("/api/media/",{name:t.info.name,file:t.dataUrl}).then((t=>{this.images.push({id:t.data.id,name:t.data.name,file:t.data.file}),this.loadingImage=!1})).catch((t=>{console.log(t)}))},selectPhoto(t){this.selectedImage=t;let e=this.$refs[t][0]||this.$refs[t];this.selectedImageSrc=e.src},dataChanged(){console.log(JSON.stringify(this.product)),console.log(JSON.stringify(this.newproduct)),console.log(JSON.stringify(this.product)===JSON.stringify(this.newproduct))},changeCategoryBrand(){this.browseCategory(),this.$refs["category-modal"].show()},changeBrand(){this.browseBrand(),this.$refs["brand-modal"].show()},removeImage(t){this.images=this.images.filter((e=>e.id!==t))},checkForm(){return!0},submitChanges(){for(let t=0;t<this.images.length;t++)this.images[t]={...this.images[t],priority:t};this.images[0]={...this.images[0],is_thumbnail:!0},this.newproduct.photos=this.images,console.log(JSON.stringify(this.newproduct,null,4)),this.$axios.put(`/api/product/${this.product.id}/`,this.newproduct,{withCredentials:!0}).then((t=>{console.log(t),this.response_message="Producto Actualizado con éxito!",this.$refs["response-modal"].show(),this.populateData(t.data),this.$route.go()})).catch((t=>{let e=500==t.response.status?"Ha ocurrido un error inesperado":t.response.data;this.response_message=e,this.$refs["response-modal"].show()}))}},mounted(){let t=this.$route.params.id;this.$axios.get(`/api/product/${t}`,{withCredentials:!0}).then((t=>t.data)).then((t=>{this.populateData(t)}))}},Q=K,tt=(0,d.Z)(Q,X,G,!1,null,"b4fbfa86",null),et=tt.exports,st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-5"},[e("b-modal",{ref:"response-modal",attrs:{size:"md",title:"Mensaje"}},[t._v(t._s(t.response_message))]),e("b-modal",{ref:"category-modal",attrs:{size:"md",title:"Seleccion de Categoría y Marca"}},[e("div",{staticClass:"col-12 d-flex flex-column align-items-center"},[e("p",[t._v("Seleccion: "),t._l(t.categoryRoute,(function(s,a){return e("b-badge",{key:a,staticClass:"mx-1"},[t._v(" "+t._s(s))])})),t._v(" "),e("b-button",{attrs:{pill:"",size:"sm"},on:{click:function(e){return t.resetCategoryRoute()}}},[t._v("x")])],2),e("b-input",{attrs:{placeholder:"buscar categoría"},on:{input:function(e){return t.browseCategory()}},model:{value:t.categorySearch,callback:function(e){t.categorySearch=e},expression:"categorySearch"}}),e("div",{staticClass:"image-upload-container mt-3"},t._l(t.categories,(function(s,a){return e("button",{key:a,staticClass:"btn btn-outline-danger m-1",on:{click:function(e){return t.setAndSearchCategory(s)}}},[t._v(t._s(s.name))])})),0)],1)]),e("b-modal",{ref:"brand-modal",attrs:{size:"md",title:"Seleccion de Categoría y Marca"}},[e("div",{staticClass:"col-12 d-flex flex-column align-items-center"},[e("p",[t._v("Seleccion: "),t.selectedBrand?e("b-badge",{staticClass:"mx-1"},[t._v(" "+t._s(t.selectedBrand?.name))]):t._e(),t._v(" "),t.selectedBrand?e("b-button",{attrs:{pill:"",size:"sm"},on:{click:function(e){return t.resetBrand()}}},[t._v("x")]):t._e()],1),e("b-input",{attrs:{placeholder:"buscar Marca"},on:{input:function(e){return t.browseBrand()}},model:{value:t.brandSearch,callback:function(e){t.brandSearch=e},expression:"brandSearch"}}),e("div",{staticClass:"image-upload-container mt-3"},t._l(t.brands,(function(s,a){return e("button",{key:a,staticClass:"btn btn-outline-primary m-1",on:{click:function(e){return t.setAndSearchBrand(s)}}},[t._v(t._s(s.name))])})),0)],1)]),e("div",{staticClass:"p-3 fixed-alert d-flex align-items-center"},[e("b-button",{staticClass:"p-2",attrs:{variant:"primary"},on:{click:function(e){return t.submitChanges()}}},[t._v("Guardar Cambios")])],1),e("div",{staticClass:"row border rounded p-3"},[e("div",{staticClass:"col-lg-6"},[e("h5",{attrs:{for:""}},[t._v("N° de Producto")]),e("p",[t._v("N° "+t._s(t.newproduct.id))]),e("h5",{attrs:{for:""}},[t._v("Nombre del Producto")]),e("b-input",{on:{input:t.dataChanged},model:{value:t.newproduct.name,callback:function(e){t.$set(t.newproduct,"name",e)},expression:"newproduct.name"}}),e("div",{staticClass:"d-flex align-items-center mt-4"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"d-flex"},[e("h5",{attrs:{for:""}},[t._v("Categorías ")]),e("a",{staticClass:"mx-2 mb-1",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeCategoryBrand()}}},[t._v("cambiar")])]),e("div",{staticClass:"d-flex"},[t.categoryRoute.length?e("div",t._l(t.categoryRoute,(function(s,a){return e("b-badge",{key:a,staticClass:"mx-1"},[t._v(" "+t._s(s))])})),1):t._e()])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"d-flex"},[e("h5",{attrs:{for:""}},[t._v("Marca ")]),e("a",{staticClass:"mx-2 mb-1",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeBrand()}}},[t._v("cambiar")])]),e("b-badge",[t._v(t._s(t.newproduct.brand?.name))])],1)]),e("div",{staticClass:"d-flex align-items-center mt-4"},[e("div",{staticClass:"col-12"},[e("h6",[t._v("Precio (USD)")]),e("b-form-input",{attrs:{min:0,type:"number"},model:{value:t.newproduct.price,callback:function(e){t.$set(t.newproduct,"price",e)},expression:"newproduct.price"}})],1)]),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"col-6"},[e("div",[e("h6",[t._v("Condición")]),e("b-form-select",{attrs:{options:t.conditionOptions,size:"md"},model:{value:t.newproduct.condition,callback:function(e){t.$set(t.newproduct,"condition",e)},expression:"newproduct.condition"}})],1)]),e("div",{staticClass:"col-6"},[e("h6",[t._v("N° de Unidades")]),e("b-form-input",{attrs:{min:0,type:"number"},model:{value:t.newproduct.quantity,callback:function(e){t.$set(t.newproduct,"quantity",e)},expression:"newproduct.quantity"}})],1)]),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"col-12"},[e("h5",[t._v("Descripción")]),e("froala",{attrs:{tag:"textarea",config:t.config},model:{value:t.newproduct.description,callback:function(e){t.$set(t.newproduct,"description",e)},expression:"newproduct.description"}},[t._v("Init text")])],1)])],1),e("br"),e("div",{staticClass:"col-lg-5"},[e("h6",[t._v("Fotos")]),t.selectedImageSrc?t._e():e("div",{staticClass:"current-image d-flex justify-content-center align-items-center"},[e("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Large Spinner",type:"grow"}})],1),t.selectedImageSrc?e("img",{staticClass:"current-image rounded border",attrs:{src:t.selectedImageSrc,alt:""}}):t._e(),e("div",{staticClass:"col-12 d-flex"},t._l(t.images,(function(s){return e("div",{key:"photo-"+s.id,staticClass:"tiny-image ml-2 my-2",class:{"border border-danger":t.selectedImage=="photo-"+s.id},on:{click:function(e){return t.selectPhoto("photo-"+s.id)}}},[e("img",{ref:"photo-"+s.id,refInFor:!0,staticClass:"w-100",attrs:{src:s.file||"/static/img/no-photo.png",alt:""}})])})),0),e("div",{staticClass:"d-flex flex-column align-items-center"},[e("image-uploader",{attrs:{debug:1,maxWidth:512,quality:.7,autoRotate:!0,outputFormat:"verbose",preview:!1,className:["d-none"],capture:!1,accept:"video/*,image/*",doNotResize:"['gif', 'svg']"},on:{input:t.setImage}},[e("label",{staticClass:"btn btn-outline-danger",attrs:{slot:"upload-label",for:"fileInput"},slot:"upload-label"},[e("figure",{staticClass:"text-center"},[e("BIconCloudUpload",{attrs:{"font-scale":"3"}})],1),e("span",[t._v("Click para subir imagen")])])]),e("b-overlay",{attrs:{show:t.loadingImage,rounded:"sm"}},[e("div",{staticClass:"image-upload-container"},[e("draggable",{attrs:{group:"people"},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}},t._l(t.images,(function(s,a){return e("div",{key:s.id,staticClass:"col-12 border rounded d-flex align-items-center my-2",class:{"border border-danger":0==a}},[e("div",{staticClass:"tiny-image m-2"},[e("img",{attrs:{src:s.file,alt:""}})]),e("p",{staticClass:"no-mp mx-4"},[t._v(t._s(s.name))]),0==a?e("small",{staticClass:"main-image-text"},[t._v("Imagen Principal (miniatura)")]):t._e(),e("div",{staticClass:"close-btn",on:{click:function(e){return t.removeImage(s.id)}}},[e("BIconXLg",{attrs:{"font-scale":".5"}})],1)])})),0)],1)])],1)])])],1)},at=[],it=s(2813),rt=s.n(it),ot=s(6983),nt=s.n(ot),ct={components:{ImageUploader:rt(),BIconCloudUpload:n.Tw7,BIconXLg:n.hOD,draggable:nt()},data(){return{config:{placeholderText:"Edit Your Content Here!",charCounterCount:!1},brands:[],selectedBrand:null,brandSearch:"",categorySearch:"",categoryRoute:[],selectedCategory:null,categories:[],response_message:"",product:{},newproduct:{},initial_images_len:0,initial_images:[],images:[],selectedImage:"",selectedImageSrc:"",loadingImage:!1,conditionOptions:[{value:"NEW",text:"Nuevo"},{value:"USED",text:"Usado"},{value:"REFURBISHED",text:"Remanufacturado"}]}},methods:{populateData(t){this.images=[],this.product=t,this.images.push(...t.photos),this.initial_images_len=this.images.length,this.initial_images=[...this.images],this.newproduct=JSON.parse(JSON.stringify(t)),this.categoryRoute=this.newproduct.category?.full_path,this.product.category_id=this.product.category?.id,this.newproduct.category_id=this.product.category?.id,this.product.brand_id=this.product.brand?.id,this.newproduct.brand_id=this.product.brand?.id,this.selectedImageSrc=this.product?.thumbnail?.file||this.images[0]?.file||s(1663)},setAndSearchBrand(t){this.selectedBrand=t,this.newproduct.brand_id=t.id,this.browseBrand()},resetBrand(){},browseBrand(){let t={search:this.brandSearch};this.$axios.get("/api/brand/",{params:t}).then((t=>{this.brands=t.data.results})).catch((t=>{console.log(t.response.data)}))},resetCategoryRoute(){this.categoryRoute=this.product.category?.full_path,this.selectedCategory=this.product.category?.id,this.newproduct.category_id=this.product.category?.id,this.selectedCategory=null,this.browseCategory()},setAndSearchCategory(t){this.selectedCategory=t.id,this.newproduct.category_id=t.id,this.categoryRoute=t.full_path,this.browseCategory()},browseCategory(){let t=this.selectedCategory?{search:this.categorySearch,parent:this.selectedCategory}:{search:this.categorySearch,parents_only:!0};this.$axios.get("/api/category/",{params:t}).then((t=>{this.categories=t.data.results})).catch((t=>{console.log(t.response.data)}))},setImage(t){this.loadingImage=!0,this.$axios.post("/api/media/",{name:t.info.name,file:t.dataUrl}).then((t=>{this.images.push({id:t.data.id,name:t.data.name,file:t.data.file}),this.loadingImage=!1,this.selectedImageSrc=t.data.file})).catch((t=>{console.log(t)}))},selectPhoto(t){this.selectedImage=t;let e=this.$refs[t][0]||this.$refs[t];this.selectedImageSrc=e.src},dataChanged(){console.log(JSON.stringify(this.product)),console.log(JSON.stringify(this.newproduct)),console.log(JSON.stringify(this.product)===JSON.stringify(this.newproduct))},changeCategoryBrand(){this.browseCategory(),this.$refs["category-modal"].show()},changeBrand(){this.browseBrand(),this.$refs["brand-modal"].show()},removeImage(t){this.images=this.images.filter((e=>e.id!==t)),this.images.length||(this.selectedImageSrc="/static/img/no-photo.png")},checkForm(){return!0},submitChanges(){for(let t=0;t<this.images.length;t++)this.images[t]={...this.images[t],priority:t};this.images[0]={...this.images[0],is_thumbnail:!0},this.newproduct.photos=this.images,console.log(JSON.stringify(this.newproduct,null,4)),this.$axios.put(`/api/product/${this.product.id}/`,this.newproduct,{withCredentials:!0}).then((t=>{console.log(t),this.response_message="Producto Actualizado con éxito!",this.$refs["response-modal"].show(),this.populateData(t.data),this.$route.go()})).catch((t=>{let e=500==t.response.status?"Ha ocurrido un error inesperado":t.response.data;this.response_message=e,this.$refs["response-modal"].show()}))}},mounted(){let t=this.$route.params.id;this.$axios.get(`/api/product/${t}`,{withCredentials:!0}).then((t=>t.data)).then((t=>{this.populateData(t)}))}},lt=ct,dt=(0,d.Z)(lt,st,at,!1,null,"611a9782",null),ut=dt.exports,ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-5"},[e("b-modal",{ref:"response-modal",attrs:{size:"md",title:"Mensaje"}},[t._v(t._s(t.response_message))]),e("b-modal",{ref:"category-modal",attrs:{size:"md",title:"Seleccion de Categoría y Marca"}},[e("div",{staticClass:"col-12 d-flex flex-column align-items-center"},[e("p",[t._v("Seleccion: "),t._l(t.categoryRoute,(function(s,a){return e("b-badge",{key:a,staticClass:"mx-1"},[t._v(" "+t._s(s))])})),t._v(" "),e("b-button",{attrs:{pill:"",size:"sm"},on:{click:function(e){return t.resetCategoryRoute()}}},[t._v("x")])],2),e("b-input",{attrs:{placeholder:"buscar categoría"},on:{input:function(e){return t.browseCategory()}},model:{value:t.categorySearch,callback:function(e){t.categorySearch=e},expression:"categorySearch"}}),e("div",{staticClass:"image-upload-container mt-3"},t._l(t.categories,(function(s,a){return e("button",{key:a,staticClass:"btn btn-outline-danger m-1",on:{click:function(e){return t.setAndSearchCategory(s)}}},[t._v(t._s(s.name))])})),0)],1)]),e("b-modal",{ref:"brand-modal",attrs:{size:"md",title:"Seleccion de Categoría y Marca"}},[e("div",{staticClass:"col-12 d-flex flex-column align-items-center"},[e("p",[t._v("Seleccion: "),t.selectedBrand?e("b-badge",{staticClass:"mx-1"},[t._v(" "+t._s(t.selectedBrand?.name))]):t._e(),t._v(" "),t.selectedBrand?e("b-button",{attrs:{pill:"",size:"sm"},on:{click:function(e){return t.resetBrand()}}},[t._v("x")]):t._e()],1),e("b-input",{attrs:{placeholder:"buscar Marca"},on:{input:function(e){return t.browseBrand()}},model:{value:t.brandSearch,callback:function(e){t.brandSearch=e},expression:"brandSearch"}}),e("div",{staticClass:"image-upload-container mt-3"},t._l(t.brands,(function(s,a){return e("button",{key:a,staticClass:"btn btn-outline-primary m-1",on:{click:function(e){return t.setAndSearchBrand(s)}}},[t._v(t._s(s.name))])})),0)],1)]),e("div",{staticClass:"p-3 fixed-alert d-flex align-items-center"},[e("b-button",{staticClass:"p-2",attrs:{variant:"primary"},on:{click:function(e){return t.submitChanges()}}},[t._v("Guardar Cambios")])],1),e("div",{staticClass:"row border rounded p-3"},[e("div",{staticClass:"col-lg-6"},[e("h5",{attrs:{for:""}},[t._v("Nombre del Producto")]),e("b-input",{on:{input:t.dataChanged},model:{value:t.newproduct.name,callback:function(e){t.$set(t.newproduct,"name",e)},expression:"newproduct.name"}}),e("div",{staticClass:"d-flex align-items-center mt-4"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"d-flex"},[e("h5",{attrs:{for:""}},[t._v("Categorías ")]),e("a",{staticClass:"mx-2 mb-1",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeCategoryBrand()}}},[t._v("cambiar")])]),e("div",{staticClass:"d-flex"},[t.categoryRoute.length?e("div",t._l(t.categoryRoute,(function(s,a){return e("b-badge",{key:a,staticClass:"mx-1"},[t._v(" "+t._s(s))])})),1):t._e()])]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"d-flex"},[e("h5",{attrs:{for:""}},[t._v("Marca ")]),e("a",{staticClass:"mx-2 mb-1",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changeBrand()}}},[t._v("cambiar")])]),e("b-badge",[t._v(t._s(t.selectedBrand?.name))])],1)]),e("div",{staticClass:"d-flex align-items-center mt-4"},[e("div",{staticClass:"col-12"},[e("h6",[t._v("Precio (USD)")]),e("b-form-input",{attrs:{min:0,type:"number"},model:{value:t.newproduct.price,callback:function(e){t.$set(t.newproduct,"price",e)},expression:"newproduct.price"}})],1)]),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"col-6"},[e("div",[e("h6",[t._v("Condición")]),e("b-form-select",{attrs:{options:t.conditionOptions,size:"md"},model:{value:t.newproduct.condition,callback:function(e){t.$set(t.newproduct,"condition",e)},expression:"newproduct.condition"}})],1)]),e("div",{staticClass:"col-6"},[e("h6",[t._v("N° de Unidades")]),e("b-form-input",{attrs:{min:0,type:"number"},model:{value:t.newproduct.quantity,callback:function(e){t.$set(t.newproduct,"quantity",e)},expression:"newproduct.quantity"}})],1)]),e("div",{staticClass:"d-flex mt-4"},[e("div",{staticClass:"col-12"},[e("h5",[t._v("Descripción")]),e("b-form-textarea",{attrs:{placeholder:"La descripcion de tu producto debe ser llamativa!",rows:"12",size:"sm","max-rows":"12"},model:{value:t.newproduct.description,callback:function(e){t.$set(t.newproduct,"description",e)},expression:"newproduct.description"}})],1)])],1),e("br"),e("div",{staticClass:"col-lg-5"},[e("h6",[t._v("Fotos")]),t.selectedImageSrc?t._e():e("div",{staticClass:"current-image d-flex justify-content-center align-items-center"},[e("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{label:"Large Spinner",type:"grow"}})],1),t.selectedImageSrc?e("img",{staticClass:"current-image rounded border",attrs:{src:t.selectedImageSrc,alt:""}}):t._e(),e("div",{staticClass:"col-12 d-flex"},t._l(t.images,(function(s){return e("div",{key:"photo-"+s.id,staticClass:"tiny-image ml-2 my-2",class:{"border border-danger":t.selectedImage=="photo-"+s.id},on:{click:function(e){return t.selectPhoto("photo-"+s.id)}}},[e("img",{ref:"photo-"+s.id,refInFor:!0,staticClass:"w-100",attrs:{src:s.file||"/static/img/no-photo.png",alt:""}})])})),0),e("div",{staticClass:"d-flex flex-column align-items-center"},[e("image-uploader",{attrs:{debug:1,maxWidth:512,quality:.7,autoRotate:!0,outputFormat:"verbose",preview:!1,className:["d-none"],capture:!1,accept:"video/*,image/*",doNotResize:"['gif', 'svg']"},on:{input:t.setImage}},[e("label",{staticClass:"btn btn-outline-danger",attrs:{slot:"upload-label",for:"fileInput"},slot:"upload-label"},[e("figure",{staticClass:"text-center"},[e("BIconCloudUpload",{attrs:{"font-scale":"3"}})],1),e("span",[t._v("Click para subir imagen")])])]),e("b-overlay",{attrs:{show:t.loadingImage,rounded:"sm"}},[e("div",{staticClass:"image-upload-container"},[e("draggable",{attrs:{group:"people"},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}},t._l(t.images,(function(s,a){return e("div",{key:s.id,staticClass:"col-12 border rounded d-flex align-items-center my-2",class:{"border border-danger":0==a}},[e("div",{staticClass:"tiny-image m-2"},[e("img",{attrs:{src:s.file,alt:""}})]),e("p",{staticClass:"no-mp mx-4"},[t._v(t._s(s.name))]),0==a?e("small",{staticClass:"main-image-text"},[t._v("Imagen Principal (miniatura)")]):t._e(),e("div",{staticClass:"close-btn",on:{click:function(e){return t.removeImage(s.id)}}},[e("BIconXLg",{attrs:{"font-scale":".5"}})],1)])})),0)],1)])],1)])])],1)},pt=[],mt={components:{ImageUploader:rt(),BIconCloudUpload:n.Tw7,BIconXLg:n.hOD,draggable:nt()},data(){return{brands:[],selectedBrand:null,brandSearch:"",categorySearch:"",categoryRoute:[],selectedCategory:null,categories:[],response_message:"",product:{},newproduct:{},initial_images_len:0,initial_images:[],images:[],selectedImage:"",selectedImageSrc:"",loadingImage:!1,conditionOptions:[{value:"NEW",text:"Nuevo"},{value:"USED",text:"Usado"},{value:"REFURBISHED",text:"Remanufacturado"}]}},methods:{populateData(t){this.images=[],this.product=t,this.images.push(...t.photos),this.initial_images_len=this.images.length,this.initial_images=[...this.images],this.newproduct=JSON.parse(JSON.stringify(t)),this.categoryRoute=this.newproduct.category?.full_path,this.product.category_id=this.product.category?.id,this.newproduct.category_id=this.product.category?.id,this.product.brand_id=this.product.brand?.id,this.newproduct.brand_id=this.product.brand?.id,this.selectedImageSrc=this.product?.thumbnail?.file||this.images[0]?.file||s(1663)},setAndSearchBrand(t){console.log(t),this.selectedBrand=t,this.newproduct.brand_id=t.id,this.browseBrand()},resetBrand(){},browseBrand(){let t={search:this.brandSearch};this.$axios.get("/api/brand/",{params:t}).then((t=>{this.brands=t.data.results})).catch((t=>{console.log(t.response.data)}))},resetCategoryRoute(){this.categoryRoute=this.product.category?.full_path,this.selectedCategory=this.product.category?.id,this.newproduct.category_id=this.product.category?.id,this.selectedCategory=null,this.browseCategory()},setAndSearchCategory(t){this.selectedCategory=t.id,this.newproduct.category_id=t.id,this.categoryRoute=t.full_path,this.browseCategory()},browseCategory(){let t=this.selectedCategory?{search:this.categorySearch,parent:this.selectedCategory}:{search:this.categorySearch,parents_only:!0};this.$axios.get("/api/category/",{params:t}).then((t=>{this.categories=t.data.results})).catch((t=>{console.log(t.response.data)}))},setImage(t){this.loadingImage=!0,this.$axios.post("/api/media/",{name:t.info.name,file:t.dataUrl}).then((t=>{this.images.push({id:t.data.id,name:t.data.name,file:t.data.file}),this.loadingImage=!1})).catch((t=>{console.log(t)}))},selectPhoto(t){this.selectedImage=t;let e=this.$refs[t][0]||this.$refs[t];this.selectedImageSrc=e.src},dataChanged(){console.log(JSON.stringify(this.product)),console.log(JSON.stringify(this.newproduct)),console.log(JSON.stringify(this.product)===JSON.stringify(this.newproduct))},changeCategoryBrand(){this.browseCategory(),this.$refs["category-modal"].show()},changeBrand(){this.browseBrand(),this.$refs["brand-modal"].show()},removeImage(t){this.images=this.images.filter((e=>e.id!==t))},checkForm(){return!0},submitChanges(){for(let t=0;t<this.images.length;t++)this.images[t]={...this.images[t],priority:t};this.images[0]={...this.images[0],is_thumbnail:!0},this.newproduct.photos=this.images,console.log(JSON.stringify(this.newproduct,null,4)),this.$axios.post("/api/product/",this.newproduct,{withCredentials:!0}).then((t=>{console.log(t),this.response_message="Producto Agregado con éxito!",this.$refs["response-modal"].show(),this.$router.push({name:"product.detail",params:{id:t.data.id}})})).catch((t=>{let e=500==t.response.status?"Ha ocurrido un error inesperado":t.response.data;this.response_message=e,this.$refs["response-modal"].show()}))}},mounted(){this.selectedImageSrc=s(1663)}},gt=mt,ft=(0,d.Z)(gt,ht,pt,!1,null,"f315ae3e",null),vt=ft.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-5 mr-5"},[e("b-modal",{ref:"filter-modal",attrs:{"hide-footer":"",title:"Seleccione el Campo a Filtrar"}},[e("div",{staticClass:"d-flex flex-column"},[e("span",{staticClass:"text-center"},[t._v("Filtros")]),e("b-form-group",{staticClass:"mx-5"},[e("b-form-checkbox-group",{attrs:{id:"checkbox-group-2",name:"flavour-2"},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},[e("b-form-checkbox",{attrs:{value:"PAYMENT_SUCCESS"}},[t._v("Pagados")]),e("b-form-checkbox",{attrs:{value:"AWAITING_PAYMENT"}},[t._v("En espera de Pago")])],1),e("b-button",{staticClass:"w-100 mt-4",on:{click:function(e){return t.filterOrder()}}},[t._v("Filtrar")])],1)],1)]),e("div",{staticClass:"row my-2 justify-content-center border rounded p-3"},[e("div",{staticClass:"offset-2 col-6"},[e("b-input",{attrs:{placeholder:"Buscar Venta"},on:{input:function(e){return t.searchOrder()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"col-3"},[e("div",{staticClass:"filter d-flex"},[e("div",{staticClass:"order-filter d-flex align-items-center pointer"},[e("BIconFilter",{attrs:{variant:"secondary"}}),e("span",{staticClass:"mx-1 p-0"},[t._v("Orden")])],1),e("div",{staticClass:"order-filter mx-3 d-flex align-items-center pointer",on:{click:function(e){return t.showFilterModal()}}},[e("BIconFunnelFill",{attrs:{variant:"secondary"}}),e("span",{staticClass:"mx-1 p-0"},[t._v("Filtros")])],1)])])]),e("div",{staticClass:"row justify-content-center border rounded px-3"},[e("div",{staticClass:"col-12"},[e("b-table",{attrs:{hover:"",busy:t.isBusy,items:t.items,"empty-filtered-text":"resultados","empty-text":"No hay registros para mostrar",fields:t.fields,"show-empty":""},scopedSlots:t._u([{key:"cell(payment_status)",fn:function(s){return["PAYMENT_SUCCESS"==s.item.payment_status?e("b-badge",{attrs:{pill:"",variant:"success"}},[t._v("Pagado")]):t._e(),"AWAITING_PAYMENT"==s.item.payment_status?e("b-badge",{attrs:{pill:"",variant:"warning"}},[t._v("Esperando Pago")]):t._e()]}},{key:"empty",fn:function(s){return[e("div",{staticClass:"d-flex flex-column align-items-center"},[e("img",{staticClass:"w-25",attrs:{src:"/static/img/no_results.svg",alt:""}}),e("h5",{staticClass:"text-center"},[t._v(t._s(s.emptyText))])])]}},{key:"emptyfiltered",fn:function(s){return[e("h4",{staticClass:"text-center"},[t._v(t._s(s.emptyFilteredText))])]}},{key:"cell(total_order)",fn:function(e){return[t._v(" "+t._s("$"+e.item.total_order)+" ")]}},{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle"}),e("strong",[t._v("Cargando...")])],1)]},proxy:!0},{key:"cell(action)",fn:function(s){return[e("b-button",{attrs:{variant:"light"},on:{click:function(e){return t.goDetail(s.item.id)}}},[e("BIconPencilSquare")],1),e("b-button",{staticClass:"mx-2",attrs:{variant:"light"}},[e("BIconTrashFill")],1)]}}])})],1)]),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"mt-3"},[e("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":5},on:{input:function(e){return t.searchOrder(e)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])],1)},bt=[],Ct={methods:{goDetail(t){this.$router.push({name:"ventas.detail",params:{id:t}})},showFilterModal(){this.$refs["filter-modal"].show()},filterOrder(){this.isBusy=!0,this.$axios.get("/api/order/",{params:{search:this.search,page:1,status:this.filters.status}}).then((t=>{this.items=t.data.results,this.totalRows=t.data.count,this.currentPage=t.data.current_page,this.isBusy=!1})).catch((t=>{console.log(t)}))},searchOrder(t=1){this.isBusy=!0,this.$axios.get("/api/order/",{params:{search:this.search,page:t,status:this.filters.status}}).then((t=>{this.items=t.data.results,this.totalRows=t.data.count,this.currentPage=t.data.current_page,this.isBusy=!1})).catch((t=>{console.log(t)}))}},components:{BIconPencilSquare:n.Sle,BIconTrashFill:n.jsZ},data(){return{filters:{status:["PAYMENT_SUCCESS","AWAITING_PAYMENT"]},currentPage:1,totalRows:0,isBusy:!0,search:"",fields:[{key:"id",label:"Nro",sortable:!0},{key:"payment_type_verbose",label:"Método de Pago",sortable:!1},{key:"payment_status",label:"Estado del Pago",sortable:!0},{key:"delivery_type_verbose",label:"Tipo de Entrega",sortable:!0},{key:"total_order",label:"Total de la Orden",sortable:!0},{key:"action",label:"Acción"}],xd:["N°","Metodo de Pago","Estado del Pago","Tipo de Entrega","Total Orden ($)","Fecha","Acción"],items:[]}},mounted(){this.isBusy=!0,this.$axios.get("/api/order/").then((t=>{this.items=t.data.results,this.totalRows=t.data.count,this.currentPage=t.data.current_page,this.isBusy=!1})).catch((t=>{console.log(t)}))}},yt=Ct,xt=(0,d.Z)(yt,_t,bt,!1,null,null,null),wt=xt.exports,St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-5 mb-3"},[t._v(" "+t._s()+" "),t.orderLoaded?e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6"},[e("h5",[t._v("Orden N°")]),e("p",[t._v(t._s(this.$route.params.id))]),e("h5",[t._v("Tipo de Entrega")]),e("p",[t._v(t._s(t.order.delivery_type_verbose))]),e("h5",[t._v("Fecha de Creación")]),e("p",[t._v(t._s(t._f("moment")(t.order.created_at,"DD/MM/YYYY h:mm:ss A")))]),e("h5",[t._v("Metodo de Pago:")]),t._v(" "+t._s(t.order.payment_type_verbose)+" "),"pago_movil"==t.order.payment_method||"transferencia_nacional"==t.order.payment_method?e("div",{staticClass:"mt-4"},[e("b-table",{attrs:{fields:t.payment_fields,items:t.order.external_payments}})],1):t._e()]),e("div",{staticClass:"col-lg-6"},[e("h3",["PAYMENT_SUCCESS"==t.order.payment_status?e("b-badge",{attrs:{pill:"",variant:"success"}},[t._v("Pagado")]):t._e(),"AWAITING_PAYMENT"==t.order.payment_status?e("b-badge",{attrs:{pill:"",variant:"warning"}},[t._v("Esperando Pago")]):t._e()],1)])]):t._e()])},kt=[],It={data(){return{order:{},payment_fields:[{key:"id",label:"Id"},{key:"payment_id",label:"Referencia"},{key:"payment_type",label:"Tipo"},{key:"national_bank",label:"Banco"},{key:"state",label:"Estado"}]}},methods:{getOrder(){this.$axios.get("/api/order/"+this.$route.params.id).then((t=>{this.order=t.data}))}},computed:{orderLoaded(){return!!Object.keys(this.order).length}},mounted(){this.getOrder()}},Pt=It,$t=(0,d.Z)(Pt,St,kt,!1,null,null,null),Bt=$t.exports;v["default"].use(_.ZP);const Ot=[{path:"/",name:"dashboard",component:N,meta:{verbose_name:"Estadisticas"}},{path:"/contacts",name:"contactos-list",component:U,meta:{verbose_name:"Contactos"}},{path:"/ventas",name:"ventas-list",component:wt,meta:{verbose_name:"Ventas"}},{path:"/ventas/detail/:id",name:"ventas.detail",component:Bt,meta:{verbose_name:"Detalle de la Venta"}},{path:"/products",name:"productos-list",component:W,meta:{verbose_name:"Productos"}},{path:"/products/detail/:id",name:"product.detail",component:et,meta:{verbose_name:"Detalles del Producto"}},{path:"/products/new/",name:"product.new",component:vt,meta:{verbose_name:"Añadir Producto"}},{path:"/products/edit/:id",name:"product.edit",component:ut,meta:{verbose_name:"Editar Producto"}}],Nt=new _.ZP({routes:Ot,mode:"history",base:"/store-admin/"});var Rt=Nt,Dt=s(6681),Ft=s(9425),Tt=(s(7024),s(3373)),Et=s.n(Tt),Ut=s(6726),At=s(8541),jt=s.n(At);const Mt={install(t,e){t.prototype.$axios=P.Z,t.prototype.$setupAxios=function(){this.$axios.defaults.baseURL={NODE_ENV:"production",BASE_URL:"/"}.API_URL||"http://127.0.0.1:8000/",this.$axios.defaults.headers["Content-Type"]="application/json",this.$axios.interceptors.request.use((t=>(this.$Progress.start(),t))),this.$axios.interceptors.response.use((t=>(this.$Progress.finish(),Promise.resolve(t))),(t=>(this.$Progress.finish(),Promise.reject(t))))}}};var Lt=Mt,Jt=(s(7522),s(2768),s(780),s(1853),s(9704),s(124)),Vt=s.n(Jt);v["default"].use(Vt()),v["default"].config.productionTip=!1,v["default"].use(Lt),v["default"].use(jt(),{color:"rgb(143, 255, 199)",failedColor:"red",height:"2px"}),v["default"].use(rt()),v["default"].use(s(4021)),v["default"].use(Ut.Z),v["default"].use(Et()),v["default"].component("apexChart",Et()),v["default"].use(Dt.XG7),v["default"].use(Ft.X),v["default"].config.productionTip=!1,new v["default"]({router:Rt,render:t=>t(f)}).$mount("#app")},1663:function(t,e,s){t.exports=s.p+"img/no-photo.23804786.png"}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(n=!1,r<o&&(o=r));if(n){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,o=a[0],n=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(c)var d=c(s)}for(e&&e(a);l<o.length;l++)r=o[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(860)}));a=s.O(a)})();
//# sourceMappingURL=app.308ce3e0.js.map